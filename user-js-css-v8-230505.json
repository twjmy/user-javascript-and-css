{"libs":[{"name":"jQuery 3","src":"@extension@jquery.min.js"}],"settings":{"badgeCounter":false,"editorConfig":{"enableBasicAutocompletion":false,"enableLiveAutocompletion":true,"enableSnippets":true,"fontSize":16,"highlightActiveLine":false,"keyboardHandler":false,"showPrintMargin":false,"tabSize":2,"theme":"ace/theme/github","useSoftTabs":true,"useWorker":true,"wrap":true},"supportBtn":false,"themesFolder":["chrome","clouds","dawn","dracula","dreamweaver","eclipse","github","monokai","solarized_dark","solarized_light","textmate","tomorrow","tomorrow_night","twilight"],"version":8},"sites":[{"compiledCss":"","css":"","id":"*","js":"function toggleFullscreen() {\r\n  if (document.fullscreenElement) document.exitFullscreen();\r\n  else document.documentElement.requestFullscreen();\r\n}\r\n\r\nfunction toggleContentEditable() {\r\n  if (document.documentElement.contentEditable == 'inherit') {\r\n    document.documentElement.setAttribute('contenteditable', '');\r\n    hint('按下 F2 即可結束網頁編輯模式');\r\n  } else {\r\n    document.documentElement.contentEditable = 'inherit';\r\n    hint('結束網頁編輯模式');\r\n  }\r\n}\r\n\r\nconst userSelect = document.createElement(\"style\");\r\nuserSelect.setAttribute('id', 'userSelect');\r\nuserSelect.innerHTML = `*{user-select: text !important;}`;\r\n\r\nfunction toggleUserSelect() {\r\n  if (!document.querySelector(`#userSelect`)) {\r\n    document.documentElement.appendChild(userSelect);\r\n    hint('按下 F4 即可結束網頁選取模式');\r\n  } else {\r\n    userSelect.remove();\r\n    hint('結束網頁選取模式');\r\n  }\r\n}\r\n\r\nconst modal = document.createElement(`div`);\r\ndocument.body.appendChild(modal);\r\nmodal.classList.add(`modal`);\r\nmodal.style.cssText = `\r\n  display: none;\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  -webkit-transform: translateX(-50%) translateY(-50%);\r\n  -ms-transform: translateX(-50%) translateY(-50%);\r\n  transform: translateX(-50%) translateY(-50%);\r\n  padding: 8px 14px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  line-height: 1.5;\r\n  max-width: 60%;\r\n  border-radius: 4px;\r\n  color: #fff;\r\n  z-index: 99999;\r\n  font-size: 14px;\r\n`; // from .mhy-toast in https://act.hoyolab.com/ys/event/signin-sea-v3/index.html?act_id=e202102251931481\r\n// https://jsfiddle.net/Tq5m3/43\r\nasync function hint(msg = null, s = 1) {\r\n  modal.innerHTML = msg;\r\n  modal.style.display = `block`;\r\n  modal.endtime = Date.now() + s * 1e3;\r\n  while(Date.now() < modal.endtime)\r\n    await new Promise(requestAnimationFrame);\r\n  modal.style.display = `none`;\r\n}\r\n\r\naddEventListener(\"keydown\", event => {\r\n  if (event.key === 'Enter' && event.altKey) toggleFullscreen();\r\n  else if (event.key == \"F2\") toggleContentEditable();\r\n  else if (event.key == \"F4\") toggleUserSelect();\r\n});","libs":[],"name":"<h4>頁面編輯</h4><button>Alt</button>+<button>Enter</button>=全螢幕模式<br><button>F2</button>=切換<code>contenteditable</code><br><button>F4</button>=<code>userSelect='text'</code>","options":{"altCSS":false,"altJS":false,"autoImportant":false,"on":true}},{"compiledCss":".stop, #egg_mask, #egg_box, #not-adult {display: none!important;}#adult {color: transparent!important; position: absolute!important; inset: 0px!important; width: 100%!important; height: 100%!important; border: unset!important; margin: unset!important; display: inline-block !important;}.top_sky.fullwindow-unlock.fullwindow {height: 95px!important;}.top_sky.fullwindow-unlock.fullwindow:hover {transform: unset!important;}.subtitle.vjs-hidden {background: transparent!important; border: unset!important; z-index: 99!important; width: 1px!important; right: 0px!important; left: unset!important; display: block !important;}#adSkipButton, .video-google-AD {z-index: 100 !important;}.nativeAD-skip-button {z-index: 101 !important;}.subtitle.vjs-hidden:hover {background: var(--card-bg)!important; width: 25.5%!important;}@media screen and (max-width: 999.9px) {.subtitle.vjs-hidden, .subtitle.vjs-hidden:hover {background: var(--card-bg)!important; width: 100%!important;} }.BH_background .container-player .player .videoframe .video #video-container .video-js .vjs-control-bar {display: flex!important;}#ani_video:not(.vjs-has-started) #ani_video_html5_api {z-index: 10!important;}#ani_video:not(.vjs-has-started) .vjs-control-bar {display: none !important;}.ncc-choosebar {width: 0px !important;}.ncc-choosearea {justify-content: flex-start !important; align-items: flex-start !important;}.ncc-choosearea img {visibility: hidden!important;}.video-cover-ncc {color: transparent!important;}.anime-quiz {background: rgba(85, 85, 85, 0.333)!important; top: 16% !important;}.video-login-wrapper, .R18 {background: transparent!important; align-items: flex-end !important;}.R18 .video-cover-ncc .ncc-choosearea .ncc-choosebar .ncc-choose-btn button:hover {background: unset!important;}.R18 .video-cover-ncc, .ncc-choosearea {height: 100%!important;}::-webkit-scrollbar {width: 1px!important;}@media (prefers-color-scheme: dark) { }","css":".stop,\r\n#egg_mask,\r\n#egg_box,\r\n#not-adult {\r\n    display: none;\r\n}\r\n#adult {\r\n    color: transparent;\r\n    display: inline-block!important;\r\n    position: absolute;\r\n    inset: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    border: unset;\r\n    margin: unset;\r\n}\r\n.top_sky.fullwindow-unlock.fullwindow {\r\n    height: 95px;\r\n}\r\n.top_sky.fullwindow-unlock.fullwindow:hover {\r\n    transform: unset;\r\n}\r\n.subtitle.vjs-hidden {\r\n    display: block!important;\r\n    background: transparent;\r\n    border: unset;\r\n    z-index: 99;\r\n    width: 1px;\r\n    right: 0;\r\n    left: unset;\r\n}\r\n#adSkipButton,\r\n.video-google-AD {\r\n    z-index: 100!important;\r\n}\r\n.nativeAD-skip-button{\r\n    z-index: 101!important;\r\n}\r\n.subtitle.vjs-hidden:hover {\r\n    background: var(--card-bg);\r\n    width: 25.5%;\r\n}\r\n@media screen and (max-width: 999.9px) {\r\n    .subtitle.vjs-hidden,\r\n    .subtitle.vjs-hidden:hover {\r\n        background: var(--card-bg);\r\n        width: 100%;\r\n    }\r\n}\r\n.BH_background .container-player .player .videoframe .video #video-container .video-js .vjs-control-bar {\r\n    display: flex;\r\n/*     z-index: 100; */\r\n}\r\n#ani_video:not(.vjs-has-started) #ani_video_html5_api {\r\n    z-index: 10;\r\n}\r\n#ani_video:not(.vjs-has-started) .vjs-control-bar {\r\n    display: none!important;\r\n}\r\n.ncc-choosebar {\r\n    width: 0!important;\r\n}\r\n.ncc-choosearea {\r\n    justify-content: flex-start!important;\r\n\talign-items: flex-start!important;\r\n}\r\n.ncc-choosearea img{\r\n    visibility: hidden;\r\n}\r\n.video-cover-ncc {\r\n    color: transparent;\r\n}\r\n.anime-quiz {\r\n    background: #5555;\r\n    top: 16%!important;\r\n}\r\n.video-login-wrapper,\r\n.R18 {\r\n    background: transparent;\r\n    align-items: flex-end!important;\r\n}\r\n.R18 .video-cover-ncc .ncc-choosearea .ncc-choosebar .ncc-choose-btn button:hover {\r\n    background: unset;\r\n}\r\n.R18 .video-cover-ncc,\r\n.ncc-choosearea {\r\n    height: 100%;\r\n}\r\n/* width */\r\n::-webkit-scrollbar {\r\n    width: 1px;\r\n}\r\n/* Handle on hover */\r\n/* ::-webkit-scrollbar-thumb:hover {\r\n  background: #555; \r\n} */\r\n@media (prefers-color-scheme: dark) {\r\n    /* Handle on hover */\r\n    /*     ::-webkit-scrollbar-thumb:hover {\r\n      background: #555; \r\n    } */\r\n}","id":"https://ani.gamer.com.tw/animeVideo.php?sn=*","js":"const 倒計時_秒 = 5;\r\nasync function next(s = 0) {\r\n  for (const sleep = resolve => setTimeout(resolve, 1000); s > 0; s--) {\r\n    danmutxt.placeholder = `${s} 秒後播放下一集/訂閱的動畫...`;\r\n    await new Promise(sleep);\r\n    while (!document.hasFocus())\r\n      await new Promise(requestAnimationFrame);\r\n    if (esc()) {\r\n      danmutxt.placeholder = `已取消繼續播放`;\r\n      for (s = 3; s > 0; s--) await new Promise(sleep);\r\n      danmutxt.placeholder = ``;\r\n      return;\r\n    }\r\n  }\r\n  danmutxt.placeholder = `即將播放下一集/訂閱的動畫...`;\r\n  let next = '';\r\n  if (document.querySelector(\".vjs-next-button.vjs-hidden\")) {\r\n    for (const a of document.querySelectorAll(`#topBarMsgList_light_1 > div > a[data-gtm-notification=\"ani\"]`)) {\r\n      // console.log(`\r\n      //   a.href=${a.href}\r\n      //   document.URL=${document.URL}\r\n      //   next=${next}\r\n      // `);\r\n      if (a.href == document.URL) {\r\n        if (!next)\r\n          danmutxt.placeholder = `⚠️找不到下一部最近更新的動畫`;\r\n        else open(next, \"_self\");\r\n        // console.log(`open(next, \"_self\");`);\r\n        return;\r\n      }\r\n      next = a.href;\r\n    }\r\n  } else {\r\n    document.querySelector('.vjs-next-button').click();\r\n    // console.log(`document.querySelector('.vjs-next-button').click();`);\r\n  }\r\n}\r\nfunction agree(event = null) {\r\n  const qagree = `.choose-btn-agree`;\r\n  if (document.querySelector(qagree)) {\r\n    if (event) event.preventDefault();\r\n    document.querySelector(qagree).click();\r\n    // console.log(`document.querySelector(qagree).click();`);\r\n  }\r\n}\r\nfunction skip(event = null) {\r\n  const adskip = `.videoAdUiSkipButton.videoAdUiAction.videoAdUiRedesignedSkipButton`,\r\n    nadskip = `.nativeAD-skip-button.enable`;\r\n  if (document.querySelector(adskip)) {\r\n    if (event) event.preventDefault();\r\n    document.querySelector(adskip).click();\r\n  } else if (document.querySelector(nadskip)) {\r\n    if (event) event.preventDefault();\r\n    document.querySelector(nadskip).click();\r\n  }\r\n}\r\nlet ifcancel = false;\r\nfunction esc() {\r\n  if (ifcancel) return !(ifcancel = false);\r\n  else return false;\r\n}\r\naddEventListener('keyup', async event => {\r\n  if (!$('.danmu-text').is(':focus')) {\r\n    // console.log(event.key);\r\n    switch (event.key) {\r\n      case 'Enter':\r\n        if (document.querySelector(`.vjs-playing`))\r\n          ani_video_html5_api.pause();\r\n        danmutxt.focus({ focusVisible: true });\r\n        return;\r\n      case 'Escape':\r\n        if (!ifcancel)\r\n          ifcancel = true;\r\n        return;\r\n      case ' ':\r\n        agree(event);\r\n        skip(event);\r\n        return;\r\n      case 'ArrowRight':\r\n        if (document.querySelector(\".vjs-ended\"))\r\n          next();\r\n        return;\r\n      case 'n':\r\n        return TOPBAR_show('light_1');\r\n      case 'N':\r\n        return next();\r\n      case 'P':\r\n        // console.log(`document.querySelector('.vjs-pre-button').click();`);\r\n        return document.querySelector('.vjs-pre-button').click();\r\n      case `J`: case `j`:\r\n        const hintsq = `hotkey-hint-show`,\r\n          hintdq = event.shiftKey ?\r\n            `div.hotkey-hint-left` :\r\n            `div.hotkey-hint-right`,\r\n          hintd = document.querySelector(hintdq),\r\n          jump = event.shiftKey ? -90 : 87;\r\n        hintd.classList.remove(hintsq);\r\n        document.querySelector(hintdq + `>div`).innerHTML = `${Math.abs(jump)}s`;\r\n        hintd.classList.add(hintsq);\r\n        ani_video_html5_api.currentTime += jump;\r\n        hintd.endtime = Date.now() + 1e3;\r\n        while (Date.now() < hintd.endtime)\r\n          await new Promise(requestAnimationFrame);\r\n        await new Promise(resolve => setTimeout(resolve, 1e3));\r\n        document.querySelector(hintdq + `>div`).innerHTML = `5s`;\r\n        hintd.classList.remove(hintsq);\r\n        return;\r\n    }\r\n  }\r\n}, true);\r\n\r\naddEventListener('keydown', event => {\r\n  if (event.defaulPrevented) return;\r\n  if (event.key === ' ' && (\r\n    document.querySelector(`.vjs-ended`) ||\r\n    document.querySelector('.choose-btn-agree') ||\r\n    document.querySelector('.nativeAD-skip-button.enable') ||\r\n    document.querySelector('.videoAdUiSkipButton.videoAdUiAction.videoAdUiRedesignedSkipButton'))\r\n  ) event.preventDefault();\r\n}, true);\r\n\r\n// https://stackoverflow.com/questions/17614844/javascript-jquery-detect-if-input-is-focused\r\n// this === document.activeElement\r\n\r\nTOPBAR_show('light_1');\r\nTOPBAR_show('light_1');\r\n\r\n~async function (\r\n  ended = `.vjs-ended`,\r\n  error = `.vjs-error>.vjs-error-display>div`,\r\n  qagree = `.choose-btn-agree`,\r\n  adskip = `.videoAdUiSkipButton.videoAdUiAction.videoAdUiRedesignedSkipButton`,\r\n  nadskip = `.nativeAD-skip-button.enable`,\r\n  fullscreen = `.vjs-fullscreen-control:not(.fullscreen-close)`,\r\n  searchsky = window[`anime-search-sky`],\r\n  s = 倒計時_秒,\r\n) {\r\n  while (!document.querySelector(qagree))\r\n    await new Promise(requestAnimationFrame);\r\n  qagree = searchsky.placeholder;\r\n  for (const sleep = resolve => setTimeout(resolve, 1000); s > 0; s--) {\r\n    searchsky.placeholder = `${s} 秒後播放動畫...`;\r\n    await new Promise(sleep);\r\n    while (!document.hasFocus())\r\n      await new Promise(requestAnimationFrame);\r\n    if (esc()) {\r\n      searchsky.placeholder = `已取消自動播放動畫`;\r\n      for (s = 3; s > 0; s--) await new Promise(sleep);\r\n      searchsky.placeholder = qagree;\r\n      s = `esc`;\r\n      break;\r\n    }\r\n  }\r\n  if (s != `esc`) {\r\n    searchsky.placeholder = `即將播放動畫...`;\r\n    agree();\r\n    searchsky.placeholder = qagree;\r\n    ani_video.requestFullscreen();\r\n  }\r\n  while (\r\n    !document.querySelector(adskip) ||\r\n    !document.querySelector(nadskip) ||\r\n    !document.querySelector(ended)\r\n  ) {\r\n    await new Promise(requestAnimationFrame);\r\n    if (document.querySelector(ended)) { //no AD\r\n      next(倒計時_秒);\r\n      return;\r\n    } else if (document.querySelector(error)) {\r\n      const sleep = resolve => setTimeout(resolve, 1000);\r\n      const e = document.createElement(`div`);\r\n      document.querySelector(error).appendChild(e);\r\n      for (s = 3; s > 0; s--) {\r\n        await new Promise(sleep);\r\n        e.innerHTML = `${s} 秒後重新整理...`;\r\n      }\r\n      if (esc()) {\r\n        e.innerHTML = `已取消重新整理...`;\r\n        for (s = 3; s > 0; s--) await new Promise(sleep);\r\n        e.remove();\r\n        return;\r\n      } else location.reload();\r\n    }\r\n  }\r\n  skip();\r\n  while (!document.querySelector(ended))\r\n    await new Promise(requestAnimationFrame);\r\n  next(倒計時_秒);\r\n}();","libs":[],"name":"<h4>巴哈姆特動漫瘋外掛</h4><button>N</button>=訂閱<br>[<button>Shift</button>+]<button>J</button>=快進87秒/倒退90秒<br><button>Shift</button>+<button>P</button>/<button>N</button>=上一集/下一集<br><button>␣</button>=同意年齡分級/跳過廣告(廣告中按下會讓畫面變黑並靜音)<br>","options":{"altCSS":false,"altJS":false,"autoImportant":true,"on":true}},{"compiledCss":"","css":"","id":"https://lms2020.nchu.edu.tw","js":"document.querySelector('.js-captcha').src=\"https://lms2020.nchu.edu.tw/sys/libs/class/capcha/secimg.php?&charLens=1&codeType=num\";\n// https://www.readfog.com/a/1632825598249373696","libs":[],"name":"1位驗證碼","options":{"altCSS":false,"altJS":false,"autoImportant":false,"on":true}},{"compiledCss":"","css":"","id":"https://act.hoyolab.com/ys/event/signin-sea-*","js":"~async function (\r\n  icon = `.mhy-hoyolab-account-block__avatar-icon`,\r\n  blah = `.components-home-assets-__sign-content_---`,\r\n  blahc = `.components-common-`,\r\n  dialog = blahc + `common-dialog-__index_---sign-content---3PZVVu`,\r\n  signWrapper = blah + `sign-wrapper---38rWqB`,\r\n  mend = blah + `mend-btn---FhiXMP`,\r\n  remind = blahc + `remind-__index_---remind-btn---1IIL1i`,\r\n  finish = blahc + `task-__index_---task-finish---2y0qCh`,\r\n  resign = blahc + `resign-modal-__index_---resign-btn---3oGNt6`,\r\n) {\r\n  while (\r\n    !document.querySelector(signWrapper) ||\r\n    document.querySelector(icon).src.indexOf(`data:image`) == 0\r\n  ) await new Promise(requestAnimationFrame);\r\n  document.querySelector(signWrapper).click();\r\n  while(\r\n    !document.querySelector(dialog) &&\r\n    !document.querySelector(`.mhy-toast`) ||\r\n    document.querySelector(`.miss-num`).innerHTML == 0\r\n  ) await new Promise(requestAnimationFrame);\r\n  ~function resignClick(){\r\n    if(document.querySelector(mend))\r\n      document.querySelector(mend).click();\r\n    if(document.querySelector(resign))\r\n      document.querySelector(resign).click();\r\n  }();\r\n  if(document.querySelector(remind))\r\n    document.querySelector(remind).click();\r\n  while(\r\n    !document.querySelector(`.task-btn`)\r\n  ) await new Promise(requestAnimationFrame)\r\n  ~async function taskBtnClick(query){\r\n    while(\r\n      document.querySelector(query) &&\r\n      document.querySelectorAll(finish).length < 3\r\n    )for(const taskBtn of document.querySelectorAll(query)){\r\n      await new Promise(requestAnimationFrame);\r\n      taskBtn.click();\r\n    }\r\n  }(`.task-btn`);\r\n  resignClick();\r\n}();","libs":[],"name":"【原神】每日簽到","options":{"altCSS":false,"altJS":false,"autoImportant":false,"on":true}}]}